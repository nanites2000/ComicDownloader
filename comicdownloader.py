import requests, os,bs4, re
from skimage import io
import shutil

urlbase = 'https://dilbert.com/strip/'
os.makedirs('Dilbert',exist_ok=True)
print("hello")
date = []

for year in range(2015,2016):
    for month in range(7                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       ki;,13):
        for day in range(1,32):
            try:
                #date = "1989-04-16"
                date = str(year)+'-'+str(month)+'-'+str(day)

                print("Downloading...  ",urlbase+date )
                res = requests.get(urlbase+date)
                res.raise_for_status()
                soup = bs4.BeautifulSoup(res.text, 'html.parser')

                soupData = soup.find()

                imageLink = []
                for tag in soup.findAll('img', alt=True):
                        data = tag['src']
                        if data[0:3] == "//a":
                            print(data)
                            imageLink = data

                imageFromWeb = requests.get("https:" +imageLink)
                #print(imageFromWeb.raw)

                with open('Dilbert/'+date+'.gif', "wb") as f:
                    f.write(imageFromWeb.content)
            except:
                print(date)
                print("FAILUREEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE!")


print("Done")